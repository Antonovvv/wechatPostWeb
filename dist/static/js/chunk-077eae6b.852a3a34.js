(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-077eae6b"],{"0201":function(e,t,a){"use strict";var i=a("1b04"),n=a.n(i);n.a},"1b04":function(e,t,a){},4056:function(e,t,a){"use strict";a("68ef"),a("09fe")},bff0:function(e,t,a){},e869:function(e,t,a){"use strict";a.r(t);var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"meIndex"}},[a("div",{attrs:{id:"me"}},[a("van-image",{attrs:{id:"headimg",round:"",width:"8rem",height:"8rem",src:e.headimgurl,fit:"cover"}}),a("p",[e._v(e._s(e.nickname))])],1),a("div",{attrs:{id:"myImg"}},[a("van-collapse",{on:{change:e.query},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"我上传的",name:"myImg"}},[a("van-list",{attrs:{finished:e.finished,error:e.error,"error-text":"请求失败，点击重新加载",id:"myImgList"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e._l(e.imglist,(function(t,i){return a("van-card",{key:i,attrs:{thumb:t.thumburl,title:t.imgname,desc:t.uploadtime,tag:t.liked},on:{"click-thumb":function(t){return e.imgPreview(i)}}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("van-button",{attrs:{size:"mini"},on:{click:function(a){return e.deleteImg(t.filehash)}}},[e._v("删除")])],1)])})),a("p",[e._v(e._s(e.emptyText))])],2)],1)],1)],1)])},s=[],r=(a("6b54"),a("bd86")),o=(a("e7e5"),a("d399")),c=(a("4662"),a("28a2")),l=(a("9cb7"),a("66fd")),d=(a("2994"),a("2bdd")),u=(a("68ef"),a("09fe"),a("bff0"),a("c31d")),h=a("d282"),m=a("a142"),f=a("b1d2"),p=a("4598"),v=a("7744"),b=a("dfaf"),g=a("9884"),w=Object(h["a"])("collapse-item"),x=w[0],j=w[1],O=["title","icon","right-icon"],k=x({mixins:[Object(g["a"])("vanCollapse")],props:Object(u["a"])({},b["a"],{name:[Number,String],disabled:Boolean,isLink:{type:Boolean,default:!0}}),data:function(){return{show:null,inited:null}},computed:{currentName:function(){return Object(m["b"])(this.name)?this.name:this.index},expanded:function(){var e=this;if(!this.parent)return null;var t=this.parent,a=t.value,i=t.accordion;return i?a===this.currentName:a.some((function(t){return t===e.currentName}))}},created:function(){this.show=this.expanded,this.inited=this.expanded},watch:{expanded:function(e,t){var a=this;if(null!==t){e&&(this.show=!0,this.inited=!0);var i=e?this.$nextTick:p["b"];i((function(){var t=a.$refs,i=t.content,n=t.wrapper;if(i&&n){var s=i.offsetHeight;if(s){var r=s+"px";n.style.height=e?0:r,Object(p["a"])((function(){n.style.height=e?r:0}))}else a.onTransitionEnd()}}))}}},methods:{onClick:function(){if(!this.disabled){var e=this.parent,t=e.accordion&&this.currentName===e.value?"":this.currentName;this.parent.switch(t,!this.expanded)}},onTransitionEnd:function(){this.expanded?this.$refs.wrapper.style.height="":this.show=!1}},render:function(){var e,t=this,a=arguments[0],i=this.disabled,n=this.expanded,s=O.reduce((function(e,a){return t.slots(a)&&(e[a]=function(){return t.slots(a)}),e}),{});this.slots("value")&&(s.default=function(){return t.slots("value")});var r=a(v["a"],{attrs:{role:"button",tabindex:i?-1:0,"aria-expanded":String(n)},class:j("title",{disabled:i,expanded:n}),on:{click:this.onClick},scopedSlots:s,props:Object(u["a"])({},this.$props)}),o=this.inited&&a("div",{directives:[{name:"show",value:this.show}],ref:"wrapper",class:j("wrapper"),on:{transitionend:this.onTransitionEnd}},[a("div",{ref:"content",class:j("content")},[this.slots()])]);return a("div",{class:[j(),(e={},e[f["b"]]=this.index,e)]},[r,o])}}),y=Object(h["a"])("collapse"),$=y[0],N=y[1],T=$({mixins:[Object(g["b"])("vanCollapse")],props:{accordion:Boolean,value:[String,Number,Array],border:{type:Boolean,default:!0}},methods:{switch:function(e,t){this.accordion||(e=t?this.value.concat(e):this.value.filter((function(t){return t!==e}))),this.$emit("change",e),this.$emit("input",e)}},render:function(){var e,t=arguments[0];return t("div",{class:[N(),(e={},e[f["c"]]=this.border,e)]},[this.slots()])}}),_=(a("bda7"),a("5e46")),I=(a("da3c"),a("0b33")),L=(a("4056"),a("44bf")),S=(a("3647"),a("ea47")),B=(a("7f7f"),a("66b9"),a("b650")),C=a("bc3a"),E=a.n(C),P={components:(i={},Object(r["a"])(i,B["a"].name,B["a"]),Object(r["a"])(i,S["a"].name,S["a"]),Object(r["a"])(i,L["a"].name,L["a"]),Object(r["a"])(i,I["a"].name,I["a"]),Object(r["a"])(i,_["a"].name,_["a"]),Object(r["a"])(i,T.name,T),Object(r["a"])(i,k.name,k),Object(r["a"])(i,d["a"].name,d["a"]),Object(r["a"])(i,l["a"].name,l["a"]),Object(r["a"])(i,c["a"].name,c["a"]),Object(r["a"])(i,o["a"].name,o["a"]),i),data:function(){return{activeNames:[],imglist:[],previewlist:[],error:!1,loading:!1,emptyText:null,finished:!1}},computed:{nickname:function(){return this.$store.state.nickname},headimgurl:function(){return this.$store.state.headimgurl}},methods:{query:function(){},imgPreview:function(e){Object(c["a"])({images:this.previewlist,startPosition:e})},deleteImg:function(e){var t=this,a=this.$store.state.serverurl+"/api/delete";E.a.get(a,{params:{filehash:e}}).then((function(e){"true"==e.data.deleted?(o["a"].success("已删除"),t.loading=!0,t.imglist=[],t.onLoad()):o["a"].fail("删除失败")}))},onLoad:function(){var e=this;if("myImg"==this.activeNames){var t=this.$store.state.serverurl+"/api/myimg";E.a.get(t,{params:{openid:this.$store.state.openid}}).then((function(t){if("true"==t.data.empty)e.emptyText="你还没上传过呢";else for(var a in e.emptyText=null,t.data){var i={};i["filehash"]=t.data[a].filehash,i["thumburl"]=e.$store.state.serverurl+"/thumbnail/"+t.data[a].filehash,i["imgurl"]=e.$store.state.serverurl+"/image/"+t.data[a].filehash,e.previewlist[a]=e.$store.state.serverurl+"/image/"+t.data[a].filehash,i["imgname"]=t.data[a].imgname,i["uploadtime"]=t.data[a].uploadtime,i["liked"]=t.data[a].liked.toString(),e.imglist.push(i)}e.loading=!1,e.finished=!0})).catch((function(){e.error=!0,e.loading=!1}))}}}},q=P,J=(a("0201"),a("2877")),z=Object(J["a"])(q,n,s,!1,null,null,null);t["default"]=z.exports}}]);
//# sourceMappingURL=chunk-077eae6b.852a3a34.js.map